/**
 * This class allow for easy handling of async calls
 */

var ResultWrapper = function() {
  this.cmdmap = {};
  /**
   * Handles the results generated by functions in MultiRemoteClient.
   * If there is a mapping between ID and function, it's carried out,
   * otherwise nothing happens.
   *
   * @param id The ID of the command which finished
   * @param success true/false
   * @param data Any resulting data (or null)
   */
  this.handler = function(id, success, data) {
    console.log("Command Id " + id + " resulted in " + success);
    if (id in this.cmdmap) {
      this.cmdmap[id](success, data);
      delete this.cmdmap[id];
    }
  }

  /**
   * Takes any MultiRemoteCommand and maps a function to be called
   * once the function returns. This is necessary since a lot of
   * functions are async and will return before they're done.
   * This simplifies the use of these functions.
   *
   * @param funcCommand Must return a multiremoteclient async id
   * @param funcFollowUp The function which should be called when command finishes
   */
  this.wrap = function(funcCommand, funcFollowUp) {
    id = funcCommand();
    this.cmdmap[id] = funcFollowUp;
  }
}
