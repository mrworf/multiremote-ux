<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content='maximum-scale=1.0, initial-scale=1.0, width=device-width' name='viewport'>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>multiREMOTE</title>

    <!-- Bootstrap core CSS -->
    <link href="dependencies/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="index.css" rel="stylesheet">
  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">multiREMOTE</a>
        <ul class="nav navbar-nav" id="zone-list">
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#"><span class="glyphicon glyphicon-off"></span> All off</a></li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <!-- Activity selector with info -->
      <div class="well well-sm" style="text-align: center; display: inline-block; float: left; width: 100%;">
        <h1>Choose activity</h1>

        <a class="btn btn-default activity active" href="" role="button">
          <div class="activity-icon">
            <img src="img/standby.png" />
          </div>
          <h3>Standby</h3>
        </a>

        <a class="btn btn-default activity" href="" role="button">
          <div class="activity-icon">
            <img src="img/spotify.png" />
          </div>
          <h3>Spotify</h3>
        </a>

        <a class="btn btn-default activity" href="" role="button">
          <div class="activity-icon">
            <img src="img/plex.png" />
          </div>
          <h3>Plex Media Center</h3>
        </a>

        <a class="btn btn-default activity" href="" role="button">
          <div class="activity-icon">
            <img src="img/ps3.png" />
          </div>
          <h3>Playstation 3</h3>
        </a>

        <a class="btn btn-default activity" href="" role="button">
          <div class="activity-icon">
            <img src="img/ps4.png" />
          </div>
          <h3>Playstation 4</h3>
        </a>

        <a class="btn btn-default activity" href="" role="button">
          <div class="activity-icon">
            <img src="img/netflix.png" />
          </div>
          <h3>Netflix</h3>
        </a>

        <a class="btn btn-default activity" href="" role="button">
          <div class="activity-icon">
            <img src="img/amazon.png" />
          </div>
          <h3>Amazon Prime</h3>
        </a>

        <a class="btn btn-default activity" href="" role="button">
          <div class="activity-icon">
            <img src="img/tube.png" />
          </div>
          <h3>YouTube</h3>
        </a>
      </div>

      <!-- Main playback control -->
      <div class="well well-sm" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <div class="btn-group btn-group-lg" role="group" aria-label="...">
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-step-backward" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-pause" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-step-forward" aria-hidden="true"></span></button>
        </div>
        <br/>
        <div class="btn-group btn-group-lg" role="group" aria-label="..." style="padding-top: 10px;">
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default" style="width: 80px"><span class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span></button>
        </div>
        <br/>
        <div class="btn-group btn-group" role="group" aria-label="..." style="padding-top: 10px; width: 100%; padding-left: 10px; padding-right: 10px">
          <button type="button" style="width: 100%;" class="btn btn-default"><span class="glyphicon glyphicon-eject" aria-hidden="true"></span></button>
        </div>
      </div>

      <!-- Navigation Control -->
      <div class="well well-sm" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <table style="float: left">
          <tr>
            <td rowspan="3" style="border-right: 1px solid #b2b2b2; padding: 3px; padding-right: 10px">
              <button type="button" style="float: left; height: 4em; margin-bottom: 3px;" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>
              <br>
              <button type="button" style="float: left; height: 4em; margin-top: 3px;" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>
            </td>
            <td style="padding: 3px; padding-left: 10px">
            </td>
            <td style="padding: 3px; vertical-align: bottom">
                <button type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></button>
            </td>
            <td style="padding: 3px; padding-right: 10px">
            </td>
            <td rowspan="3" style="border-left: 1px solid #b2b2b2; padding-left: 10px">
              <div class="btn-group-vertical btn-group-lg" role="group" aria-label="...">
                <button type="button" class="btn btn-default">Home</button>
                <button type="button" class="btn btn-default">Top menu</button>
                <button type="button" class="btn btn-default">Menu</button>
                <button type="button" class="btn btn-default">Back</button>
              </div>
            </td>
          </tr>

          <tr>
            <td style="padding: 3px; padding-left: 10px">
              <button type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span></button>
            </td>
            <td style="padding: 3px">
              <button type="button" class="btn btn-default btn-lg">OK</button>
            </td>
            <td style="padding: 3px; padding-right: 10px">
              <button type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></button>
            </td>
          </tr>

          <tr>
            <td style="padding: 3px; padding-left: 10px">
            </td>
            <td style="padding: 3px; vertical-align: top">
              <button type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></button>
            </td>
            <td style="padding: 3px; padding-right: 10px">
            </td>
          </tr>
        </table>
      </div>
      <br clear="all">
      <!-- Audio/Video settings -->
      <div class="well well-sm" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <div class="btn-group btn-group-lg" role="group" aria-label="...">
          <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span> Subtitle</button>
          <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-music" aria-hidden="true"></span> Audio</button>
          <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> Angle</button>
          <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Info</button>
        </div>
      </div>

      <!-- Playback settings -->
      <div class="well well-sm" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <div class="btn-group btn-group-lg" role="group" aria-label="...">
          <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Shuffle</button>
          <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-retweet" aria-hidden="true"></span> Repeat</button>
        </div>
      </div>

      <!-- Volume controls -->
      <div class="well well-sm" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <div class="btn-group-vertical btn-group-lg" role="group" aria-label="...">
          <button type="button" style="height: 4em" class="btn btn-default"><span class="glyphicon glyphicon-volume-up" aria-hidden="true"></span></button>
          <button type="button" style="height: 4em" class="btn btn-default"><span class="glyphicon glyphicon-volume-down" aria-hidden="true"></span></button>
          <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-volume-off" aria-hidden="true"></span></button>
        </div>
      </div>

      <!-- Text input -->
      <div class="well well-sm" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Text input" aria-describedby="basic-addon2">
          <span class="input-group-btn">
            <button class="btn btn-default" type="button">Send</button>
          </span>
        </div>
      </div>

      <!-- App redirect -->
      <div class="alert alert-info" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <h3>This activity is controlled from a separate screen.</h3>
        <br/>
        <button type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Take me there</button>
      </div>

      <!-- No options redirect -->
      <div class="alert alert-warning" style="text-align: center; display: inline-block; float: left; margin: 5px">
        <h3>This activity has no controls</h3>
      </div>

    </div> <!-- /container -->


    <!-- Working indicator -->
    <div style="width: 50%; height: 58px; overflow: hidden; padding: 2px; margin: auto; background: #ffffff; border: 2px outset" class="modal" id="busyIndicator" data-backdrop="static" data-keyboard="false">
      <div class="modal-body">
        <div class="progress">
          <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="font-size: 18px; width:100%">Initializing</div>
        </div>
      </div>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="dependencies/jquery2.min.js"></script>
    <script src="dependencies/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      // Remove hover functionality since it seems to slow down Android devices
      for (var i = 0; i != document.styleSheets.length; i++) {
        var rulesToLoose = [];
        for (var ii = 0; ii != document.styleSheets[i].cssRules.length; ++ii) {
          if (document.styleSheets[i].cssRules[ii].selectorText && document.styleSheets[i].cssRules[ii].selectorText.indexOf(':hover') > 0) {
            rulesToLoose.push(ii);
          }
        }
        for (var ii = rulesToLoose.length-1; ii != -1; --ii) {
          if (document.styleSheets[i].deleteRule) {
            document.styleSheets[i].deleteRule(rulesToLoose[ii]);
          } else if (document.styleSheets[i].removeRule) {
            document.styleSheets[i].removeRule(rulesToLoose[ii]);
          }
      }

      $("#busyIndicator").modal();
    }
    </script>
    <script src="multiremoteclient.js"></script>
    <script src="buttonrepeater.js"></script>
    <script src="resultwrapper.js"></script>
    <script type="text/javascript">
      var result = new ResultWrapper();
      var app = new MultiRemoteClient("magi.sfo.sensenet.nu", function(a,b,c){result.handler(a,b,c);});

      // init the client and remove the modal once done
      result.wrap(function(){return app.init();}, function() {
        z = app.getZones();
        for (var e in z) {
          if (z.hasOwnProperty(e)) {
            if (app.hasSubZones(e))
              addSubZone(z[e], e, app.getSubZones(e));
            else
              addZone(z[e], e);
          }
        }
        console.log(z);
        $("#busyIndicator").modal("hide");
      });

      function addZone(strName, strId) {
        $("#zone-list").append('<li><a href="#">' + strName + '</a></li>');
      }

      function addSubZone(strName, strId, lstSubZones) {
        var element = '<li class="dropdown">';
        element += '<a href="#" style="display: inline-block; padding-right: 0px" id="' + strId + '">' + strName + '</a>';
        element += '<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" style="display: inline-block"><span class="caret"></span></a>';
        element += '<ul class="dropdown-menu" role="menu">';
        element += '<li class="dropdown-header">Pick activity</li>';

        for (e in lstSubZones) {
          if (lstSubZones.hasOwnProperty(e)) {
            element += '<li><a href="#">' + lstSubZones[e] + '</a></li>'
          }
        }

        element +=  '</ul></li>';

        $("#zone-list").append(element);
      }

      /*
          <li><a href="#about">Kitchen</a></li>
          <li><a href="#contact">Patio</a></li>
        */
    </script>
  </body>
</html>
